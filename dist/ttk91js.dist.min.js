"use strict";var _slicedToArray=function(){function t(t,e){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){var n=function(){};n.prototype={bind:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},unbind:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)},trigger:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(t){for(var e=["bind","unbind","trigger"],r=0;r<e.length;r++)t.prototype[e[r]]=n.prototype[e[r]]},"undefined"!=typeof e&&"exports"in e&&(e.exports=n)},{}],2:[function(t,e,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===i||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){v&&m&&(v=!1,m.length?p=m.concat(p):y=-1,p.length&&u())}function u(){if(!v){var t=s(a);v=!0;for(var e=p.length;e;){for(m=p,p=[];++y<e;)m&&m[y].run();y=-1,e=p.length}m=null,v=!1,o(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var f,l,g=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:i}catch(t){l=i}}();var m,p=[],v=!1,y=-1;g.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new h(t,e)),1!==p.length||v||s(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=c,g.addListener=c,g.once=c,g.off=c,g.removeListener=c,g.removeAllListeners=c,g.emit=c,g.binding=function(t){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(t){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},{}],3:[function(t,e,r){function n(t,e,r,n,i){var s=i;return s|=t<<24,s|=e<<21,s|=r<<19,s|=n<<16}function i(t){for(var e=t.split("\n"),r=[],n={},i=[],s=[],a=0;a<e.length;a++){var u=e[a].trim(),h=u.indexOf(";");if(h!=-1&&(u=u.substring(0,h)),0!==u.length){var c=u.split(/[\s]+/);if(o.indexOf(c[0])==-1&&(i.push(c[0]),s.push(r.length),c.shift()),"DC"==c[0])s.pop(),s.push(parseInt(c[1]));else{if(3==c.length&&(","!=c[1][c[1].length-1]||(c[1]=c[1].substring(0,c[1].length-1))),3==c.length)if(h=c[2].indexOf("("),h!=-1){var f=c[2].indexOf(")",h);f==-1||(c.push(c[2].substring(h+1,f)),c[2]=c[2].substring(0,h))}else"="==c[2][0]?c.push("R0"):"@"==c[2][0]?"R"==c[2][1]?(c.push("R"+c[2][2]),c[2]="0"):c.push("R0"):"R"==c[2][0]?(c.push(c[2]),c[2]="=0"):c.push("R0");n[r.length]=a,r.push(c)}}}return{code:r,symbols:i,data:s,lineMap:n}}var s={NOP:0,STORE:1,LOAD:2,IN:3,OUT:4,ADD:17,SUB:18,MUL:19,DIV:20,MOD:21,AND:22,OR:23,XOR:24,SHL:25,SHR:26,NOT:27,SHRA:28,COMP:31,JUMP:32,JNEG:33,JZER:34,JPOS:35,JNNEG:36,JNZER:37,JNPOS:38,JLES:39,JEQU:40,JGRE:41,JNLES:42,JNEQU:43,JNGRE:44,CALL:49,EXIT:50,PUSH:51,POP:52,PUSHR:53,POPR:54,SVC:112},o=Object.keys(s),a={CRT:0},u={HALT:11},h={IMMEDIATE:0,DIRECT:1,INDIRECT:2},c=6,f=function(t){function e(t){for(var e=0;e<f.symbols.length;e++)if(f.symbols[e]==t)return f.code.length+e}function r(t){return"SP"==t||2==t.length&&"R"==t[0]}function o(t){return"SP"==t?c:parseInt(t[1])}var f=i(t),l=[],g=!0,m=!1,p=void 0;try{for(var v,y=f.code[Symbol.iterator]();!(g=(v=y.next()).done);g=!0){var d=v.value;r(d[1])?d[1]=o(d[1]):d[1]=e(d[1]);var R=s[d[0]],E=d[1],b=0,T=h.DIRECT,P=0;if(d.length>2){if("="==d[2][0]){T=h.IMMEDIATE;var S=d[2].substring(1);if(/^[0-9]+$/i.test(S))P=parseInt(S);else switch(S){case"CRT":P=a.CRT;break;case"HALT":P=u.HALT}}else"@"==d[2][0]?(T=h.INDIRECT,P=parseInt(d[2].substring(1))):P=/^[a-z]+$/i.test(d[2])?e(d[2]):parseInt(d[2]);b=o(d[3])}R>=s.JUMP&&R<=s.JNGRE&&(P=E,E=0,T=0);var O=n(R,E,T,b,P);l.push(O)}}catch(t){m=!0,p=t}finally{try{!g&&y.return&&y.return()}finally{if(m)throw p}}return{lines:f.code,code:l,symbols:f.symbols,data:f.data,lineMap:f.lineMap}};e.exports=f},{}],4:[function(t,e,r){var n=t("./ttk91js.compile.js"),i=t("./ttk91js.machine.js"),s={compile:n,createMachine:function(t){return new i(t)}};"undefined"==typeof window?e.exports=s:window.ttk91js=s},{"./ttk91js.compile.js":3,"./ttk91js.machine.js":5}],5:[function(t,e,r){(function(r){function n(t){return[(t&255<<24)>>24,(t&7<<21)>>21,(t&3<<19)>>19,(t&7<<16)>>16,65535&t]}function i(t){this.settings=t,this.memory=new Uint32Array(t.memory),this.stdout={write:function(t){r.stdout.write(t+"\n")}},this.lastPosition=0,this.reset()}var s=t("microevent"),o={NOP:0,STORE:1,LOAD:2,IN:3,OUT:4,ADD:17,SUB:18,MUL:19,DIV:20,MOD:21,AND:22,OR:23,XOR:24,SHL:25,SHR:26,NOT:27,SHRA:28,COMP:31,JUMP:32,JNEG:33,JZER:34,JPOS:35,JNNEG:36,JNZER:37,JNPOS:38,JLES:39,JEQU:40,JGRE:41,JNLES:42,JNEQU:43,JNGRE:44,CALL:49,EXIT:50,PUSH:51,POP:52,PUSHR:53,POPR:54,SVC:112},a={CRT:0},u={HALT:11},h=4,c=2,f=1,l=6,g=7;i.prototype={_getValue:function(t,e,r){var n=0;return n=0===e?r:this.reg[e]+r,t>0&&(n=this._getValue(--t,e,this.memory[r])),n},load:function(t){for(var e=0;e<t.code.length;e++)this.memory[e]=t.code[e];for(var r=0;r<t.symbols.length;r++)this.memory[e+r]=t.data[r];this.data=t},getRegister:function(){return{0:this.reg[0],1:this.reg[1],2:this.reg[2],3:this.reg[3],4:this.reg[4],5:this.reg[5],SP:this.reg[l],FP:this.reg[g],PC:this.reg.PC}},getMemory:function(){return this.memory},getRealLine:function(){return this.data.lineMap[this.lastPosition]},stop:function(){this.ok=!1},setStdout:function(t){this.stdout=t},reset:function(){this.ok=!0,this.SR=0,this.reg={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,FP:0,PC:0},this.memory.fill(0)},run:function(){for(var t=0;this.isRunning()&&(this.runWord(),t++,!(this.settings.maxLoop&&t>=this.settings.maxLoop)););},isRunning:function(){return this.ok&&this.reg.PC<this.memory.length},runWord:function(t){t=t||1;for(var e=0;e<t;e++)this._runWord()},_runWord:function(){var t=n(this.memory[this.reg.PC]),e=_slicedToArray(t,5),r=e[0],i=e[1],s=e[2],l=e[3],g=e[4],m=this._getValue(s,l,g);switch(this.lastPosition=this.reg.PC,this.reg.PC++,r){case o.STORE:var p=this.memory[g];this.memory[g]=this.reg[i],this.settings.triggerMemoryChange&&p!=this.memory[g]&&this.trigger("memory-change",g,p,this.memory[g]);break;case o.LOAD:this.reg[i]=m;break;case o.OUT:switch(g){case a.CRT:this.stdout.write(this.reg[i])}break;case o.ADD:this.reg[i]+=m;break;case o.SUB:this.reg[i]-=m;break;case o.DIV:this.reg[i]=Math.floor(this.reg[i]/m);break;case o.MUL:this.reg[i]*=m;break;case o.SVC:switch(g){case u.HALT:this.ok=!1,this.trigger("halt")}break;case o.COMP:this.SR=0,this.reg[i]==m&&(this.SR|=c),this.reg[i]>m&&(this.SR|=f),this.reg[i]<m&&(this.SR|=h);break;case o.JUMP:this.reg.PC=this.memory[g];break;case o.JNEG:break;case o.JZER:break;case o.JPOS:break;case o.JNNEG:break;case o.JNZER:break;case o.JNPOS:break;case o.JLES:break;case o.JEQU:this.SR&c&&(this.reg.PC=this.memory[g]);break;case o.JGRE:break;case o.JNLES:break;case o.JNEQU:this.SR&c||(this.reg.PC=this.memory[g]);break;case o.JNGRE:}}},s.mixin(i),e.exports=i}).call(this,t("_process"))},{_process:2,microevent:1}]},{},[4]);