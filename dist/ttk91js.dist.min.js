"use strict";var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function e(t,r,n){function i(s,u){if(!r[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){var n=function(){};n.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["bind","unbind","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=n.prototype[t[r]]},"undefined"!=typeof t&&"exports"in t&&(t.exports=n)},{}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function u(){m&&g&&(m=!1,g.length?y=g.concat(y):d=-1,y.length&&c())}function c(){if(!m){var e=o(u);m=!0;for(var t=y.length;t;){for(g=y,y=[];++d<t;)g&&g[d].run();d=-1,t=y.length}g=null,m=!1,s(e)}}function a(e,t){this.fun=e,this.array=t}function f(){}var l,h,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var g,y=[],m=!1,d=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new a(e,t)),1!==y.length||m||o(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],3:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],4:[function(e,t,r){t.exports=function(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],5:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function u(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function c(e,t,n){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return v(i)||(i=c(e,i,n)),i}var o=a(e,t);if(o)return o;var s=Object.keys(t),y=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),j(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(t);if(0===s.length){if(k(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(j(t))return f(t)}var d="",b=!1,O=["{","}"];if(g(t)&&(b=!0,O=["[","]"]),k(t)){var w=t.name?": "+t.name:"";d=" [Function"+w+"]"}if(E(t)&&(d=" "+RegExp.prototype.toString.call(t)),S(t)&&(d=" "+Date.prototype.toUTCString.call(t)),j(t)&&(d=" "+f(t)),0===s.length&&(!b||0==t.length))return O[0]+d+O[1];if(n<0)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var R;return R=b?l(e,t,n,y,s):s.map(function(r){return h(e,t,n,y,r,b)}),e.seen.pop(),p(R,d,O)}function a(e,t){if(w(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,i){for(var o=[],s=0,u=t.length;s<u;++s)N(t,String(s))?o.push(h(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),N(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=m(r)?c(e,a.value,null):c(e,a.value,r-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function g(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function m(e){return null===e}function d(e){return null==e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function O(e){return"symbol"===("undefined"==typeof e?"undefined":_typeof(e))}function w(e){return void 0===e}function E(e){return R(e)&&"[object RegExp]"===x(e)}function R(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e}function S(e){return R(e)&&"[object Date]"===x(e)}function j(e){return R(e)&&("[object Error]"===x(e)||e instanceof Error)}function k(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===("undefined"==typeof e?"undefined":_typeof(e))||"undefined"==typeof e}function x(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var A=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(A,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),u=n[r];r<o;u=n[++r])s+=m(u)||!R(u)?" "+u:" "+i(u);return s},r.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var I,_={};r.debuglog=function(e){if(w(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!_[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=t.pid;_[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else _[e]=function(){};return _[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=g,r.isBoolean=y,r.isNull=m,r.isNullOrUndefined=d,r.isNumber=b,r.isString=v,r.isSymbol=O,r.isUndefined=w,r.isRegExp=E,r.isObject=R,r.isDate=S,r.isError=j,r.isFunction=k,r.isPrimitive=T,r.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",D(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!R(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,_process:2,inherits:3}],6:[function(e,t,r){function n(e){return[(e&255<<24)>>24,(e&7<<21)>>21,(e&3<<19)>>19,(e&7<<16)>>16,65535&e]}t.exports={splitWord:n,OP:Object.freeze({NOP:0,STORE:1,LOAD:2,IN:3,OUT:4,ADD:17,SUB:18,MUL:19,DIV:20,MOD:21,AND:22,OR:23,XOR:24,SHL:25,SHR:26,NOT:27,SHRA:28,COMP:31,JUMP:32,JNEG:33,JZER:34,JPOS:35,JNNEG:36,JNZER:37,JNPOS:38,JLES:39,JEQU:40,JGRE:41,JNLES:42,JNEQU:43,JNGRE:44,CALL:49,EXIT:50,PUSH:51,POP:52,PUSHR:53,POPR:54,SVC:112}),MODE:Object.freeze({IMMEDIATE:0,DIRECT:1,INDIRECT:2}),SR_BITS:Object.freeze({G:1,E:2,L:4,OVERFLOW:8,DIVIDE_BY_ZERO:16,UNKNOWN_INSTRUCTION:32,FORBIDDED_MEMORY_ADRESS:64,DEVICE_INTERRUPT:128,SVC:256,PRIVILEGED:512,INTERRUPTS_DISABLED:1024})}},{}],7:[function(e,t,r){function n(e,t){this.name="Ttk91jsCompileException",this.message=e,this.line=t}function i(e,t,r,n,i){var o=i;return o|=e<<24,o|=t<<21,o|=r<<19,o|=n<<16}function o(e){return e=l.OP[e],e===l.OP.NOP?0:e==l.OP.NOT?1:e>=l.OP.JUMP&&e<=l.OP.JNGRE?1:2}function s(e){return 2==e.length&&("SP"==e||"FP"==e||"R"==e[0]&&/[0-9]/.test(e[1]))}function u(e){return"="!=e[0]&&"@"!=e[0]||(e=e.substring(1)),/^[a-z][0-9a-z]*$/i.test(e)}function c(e){return"="!=e[0]&&"@"!=e[0]||(e=e.substring(1)),/^[0-9]+$/.test(e)}function a(e){return u(e)||s(e)||c(e)}function f(e){function t(e){return"="!=e[0]&&"@"!=e[0]||(e=e.substring(1)),e}function r(e){var t=!0,r=!1,n=void 0;try{for(var i,o=f[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.name==e)return!0}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}switch(e){case"CRT":case"HALT":return!0}return!1}for(var i=e.split("\n"),s=[],c={},f=[],l=[],p=0,g=function(e){var t=i[e].trim(),r=t.indexOf(";");if(r!=-1&&(t=t.substring(0,r)),0===t.length)return"continue";t=t.replace(/\s+/g," "),r=t.indexOf(" ");var u=null;if(u=r==-1?[t.trim()]:[t.substring(0,r),t.substring(r+1)],h.indexOf(u[0])==-1){if(1==u.length)throw new n("unknown opcode ("+u[0]+")",e);f.push({name:u[0],value:s.length,type:"absolute",size:1}),r=u[1].indexOf(" "),r!=-1&&(u=[u[1].substring(0,r),u[1].substring(r+1)])}if("EQU"==u[0]){var g=parseInt(u[1]),y=f.pop().name;f.push({name:y,value:g,type:"absolute",size:0})}else if("DC"==u[0]){var m=parseInt(u[1]),d=f.pop().name;f.push({name:d,value:p,type:"relative",size:1}),l.push({value:m,size:1}),p+=1}else if("DS"==u[0]){var b=parseInt(u[1]),v=f.pop().name;f.push({name:v,value:p,type:"relative",size:b}),l.push({value:0,size:b}),p+=b}else{var O=u.shift(),w=[];if(u.length>0&&(w=u.join("").split(",").map(function(e){return e.trim()})),h.indexOf(O)==-1)throw new n("unknown opcode ("+O+")",e);if(2==w.length)if(r=w[1].indexOf("("),r!=-1){var E=w[1].indexOf(")",r);if(E==-1)throw new n("syntax error",e);w.push(w[1].substring(r+1,E)),w[1]=w[1].substring(0,r)}else"="==w[1][0]?w.push("R0"):"@"==w[1][0]?"R"==w[1][1]?(w.push("R"+w[1][2]),w[1]="0"):w.push("R0"):"R"==w[1][0]?(w.push(w[1]),w[1]="=0"):w.push("R0");if(w.forEach(function(r){if(!a(r))throw new n("syntax error ("+t+")",e)}),w.forEach(function(t){if(2==t.length&&"R"==t[0]&&(/0-9/.test(t[1])||parseInt(t[1])>7))throw new n("invalid register ("+t+")",e)}),o(O)!=w.length-1)throw new n("wrong argcount ("+O+")",e);c[s.length]=e,s.push({line:e,code:[O].concat(w)})}},y=0;y<i.length;y++){g(y)}var m=!0,d=!1,b=void 0;try{for(var v,O=s[Symbol.iterator]();!(m=(v=O.next()).done);m=!0){var w=v.value;if(2==w.code.length&&u(w.code[1])){var E=t(w.code[1]);if(!r(E))throw new n("unknown symbol ("+E+")",w.line)}else if(4==w.code.length&&u(w.code[2])){var R=t(w.code[2]);if(!r(R))throw new n("unknown symbol ("+R+")",w.line)}}}catch(e){d=!0,b=e}finally{try{!m&&O.return&&O.return()}finally{if(d)throw b}}return{code:s,symbols:f,data:l,sourceMap:c}}var l=e("./ttk91js.common.js"),h=Object.keys(l.OP),p={CRT:0},g={HALT:11},y=l.MODE,m=6;n.prototype.toString=function(){return this.name+": "+this.message};var d=function(e){function t(e){for(var t=0;t<n.symbols.length;t++)if(n.symbols[t].name==e)return n.symbols[t].value}function r(e){return"SP"==e?m:parseInt(e[1])}for(var n=f(e),o=[],u=0;u<n.symbols.length;u++)"relative"==n.symbols[u].type&&(n.symbols[u].value+=n.code.length),delete n.symbols[u].type;var c=!0,a=!1,h=void 0;try{for(var d,b=n.code[Symbol.iterator]();!(c=(d=b.next()).done);c=!0){var v=d.value,O=v.code,w=l.OP[O[0]],E=0,R=0,S=y.DIRECT,j=0;if(O.length>1&&(E=s(O[1])?r(O[1]):t(O[1])),O.length>2)if(R=r(O[3]),0!==R&&(S=y.IMMEDIATE),w==l.OP.STORE&&(S=y.IMMEDIATE),"="==O[2][0]){S=y.IMMEDIATE;var k=O[2].substring(1);if(/^[0-9]+$/i.test(k))j=parseInt(k);else switch(k){case"CRT":j=p.CRT;break;case"HALT":j=g.HALT;break;default:j=t(k)}}else if("@"==O[2][0]){S=y.INDIRECT;var T=O[2].substring(1);j=t(T)}else j=/^[a-z]+$/i.test(O[2])?t(O[2]):parseInt(O[2]);w>=l.OP.JUMP&&w<=l.OP.JNGRE&&(j=E,E=0,S=0);var x=i(w,E,S,R,j);o.push(x)}}catch(e){a=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(a)throw h}}return{code:o,symbols:n.symbols,data:n.data,sourceMap:n.sourceMap}};t.exports=d},{"./ttk91js.common.js":6}],8:[function(e,t,r){function n(){this.PC=0,this.IR=0}n.prototype={cycle:function(e,t){this.PC=e,this.IR=t}},t.exports=n},{}],9:[function(e,t,r){function n(e,t){this.name="Ttk91jsRuntimeException",this.message=e,this.line=t}n.prototype.toString=function(){return this.name+": "+this.message},t.exports={Ttk91jsRuntimeException:n}},{}],10:[function(e,t,r){function n(e){var t=o.splitWord(e),r=_slicedToArray(t,5),n=r[0],s=r[1],u=r[2],a=r[3],f=r[4];if(0===n)return"NOP";var l="";switch(u){case o.MODE.IMMEDIATE:l="=";break;case o.MODE.INDIRECT:l="@"}if(n>=o.OP.JUMP&&n<=o.OP.JNGRE)return i.format("%s %d",c[n],f);var h="R"+s;return 6==s?h="SP":7==s&&(h="FP"),i.format("%s %s, %s%s(R%s)",c[n],h,l,f,a)}var i=e("util"),o=e("./ttk91js.common.js"),s=e("./ttk91js.compile.js"),u=e("./ttk91js.machine.js"),c=(Object.keys(o.OP),{});for(var a in o.OP)c[o.OP[a]]=a;var f={word:function(e){("0".repeat(32)+(e>>>0).toString(2)).slice(-32)},bin:function(e){}},l={wordToSymbolic:n,compile:s,createMachine:function(e){return new u(e)},debug:f};"undefined"==typeof window?t.exports=l:window.ttk91js=l},{"./ttk91js.common.js":6,"./ttk91js.compile.js":7,"./ttk91js.machine.js":11,util:5}],11:[function(e,t,r){(function(r){function n(e){this.settings=e,this.memory=Object.freeze(new u(this,e.memory)),this.reg=new Uint32Array(9),this.stdout={write:function(e){r.stdout.write(e+"\n")}},this.debugger=new c,this.reset()}var i=e("microevent"),o=e("./ttk91js.common.js"),s=e("./ttk91js.exceptions.js").Ttk91jsRuntimeException,u=e("./ttk91js.memory.js"),c=e("./ttk91js.debugger.js"),a={CRT:0},f={HALT:11},l=o.OP,h=o.SR_BITS,p=8;n.prototype={_getValue:function(e,t,r){var n=0;if(n=0===t?r:this.reg[t]+r,3==e)throw new s("Invalid memory access mode",this.debugger.PC);return e>0&&(n=this._getValue(--e,t,this.memory.getAt(r))),n},reset:function(){this.ok=!0,this.SR=0,this.reg.fill(0),this.memory.reset(),this.data=null},load:function(e){for(var t=0;t<e.code.length;t++)this.memory.setAt(t,e.code[t]);for(var r=0,n=0;n<e.data.length;n++)this.memory.setAt(t+r,e.data[n].value),r+=e.data[n].size;this.data=e},getRegisters:function(){return this.reg},getMemory:function(){return this.memory},stop:function(){this.ok=!1},setStdout:function(e){this.stdout=e},run:function(e){e=e||-1;for(var t=0;this.isRunning()&&(this.runWord(),t++,!(e>0&&t>=e)););},isRunning:function(){return this.ok&&this.reg[p]<this.memory.size()},runWord:function(e){e=e||1;for(var t=0;t<e;t++)this._runWord()},_runWord:function(){var e=this.memory.getAt(this.reg[p]);this.debugger.cycle(this.reg[p],e);var t=o.splitWord(e),r=_slicedToArray(t,5),n=r[0],i=r[1],u=r[2],c=r[3],g=r[4],y=this._getValue(u,c,g);switch(this.reg[p]++,n){case l.NOP:break;case l.STORE:this.settings.triggerMemoryWrite&&this.trigger("memory-write",y,this.memory.getAt(y),this.reg[i]),this.memory.setAt(y,this.reg[i]);break;case l.LOAD:this.settings.triggerRegisterWrite&&this.trigger("register-write",i,this.reg[i],y),this.reg[i]=y;break;case l.OUT:switch(g){case a.CRT:this.stdout.write(this.reg[i])}break;case l.ADD:this.reg[i]+=y;break;case l.SUB:this.reg[i]-=y;break;case l.DIV:this.reg[i]=Math.floor(this.reg[i]/y);break;case l.MUL:this.reg[i]*=y;break;case l.MOD:this.reg[i]=this.reg[i]%y;break;case l.AND:this.reg[i]=this.reg[i]&y;break;case l.OR:this.reg[i]=this.reg[i]|y;break;case l.XOR:this.reg[i]=this.reg[i]^y;break;case l.SHL:this.reg[i]=this.reg[i]<<y;break;case l.SHR:this.reg[i]=this.reg[i]>>y;break;case l.SHRA:this.reg[i]=this.reg[i]>>>y;break;case l.NOT:this.reg[i]=~this.reg[i];break;case l.SVC:switch(g){case f.HALT:this.ok=!1,this.trigger("halt")}break;case l.COMP:this.SR=0,this.reg[i]==y&&(this.SR|=h.E),this.reg[i]>y&&(this.SR|=h.G),this.reg[i]<y&&(this.SR|=h.L);break;case l.JUMP:this.reg[p]=g;break;case l.JNEG:break;case l.JZER:break;case l.JPOS:break;case l.JNNEG:break;case l.JNZER:break;case l.JNPOS:break;case l.JLES:break;case l.JEQU:this.SR&h.E&&(this.reg[p]=this.memory.getAt(g));break;case l.JGRE:break;case l.JNLES:break;case l.JNEQU:this.SR&h.E||(this.reg[p]=this.memory.getAt(g));break;case l.JNGRE:break;default:throw new s("unknown opcode ("+n+")",this.debugger.PC)}this.settings.triggerRegisterWrite&&this.trigger("register-write",p,this.debugger.PC,this.reg[p])}},i.mixin(n),t.exports=n}).call(this,e("_process"))},{"./ttk91js.common.js":6,"./ttk91js.debugger.js":8,"./ttk91js.exceptions.js":9,"./ttk91js.memory.js":12,_process:2,microevent:1}],12:[function(e,t,r){function n(e,t){this.machine=e,this.memory=new Uint32Array(t)}var i=e("./ttk91js.exceptions.js").Ttk91jsRuntimeException;n.prototype={setAt:function(e,t){if(e<0||e>=this.memory.length)throw new i("trying to access outside of program memory ("+e+")",this.machine.debugger.PC);this.memory[e]=t},getAt:function(e){if(e<0||e>=this.memory.length)throw new i("trying to access outside of program memory ("+e+")",this.machine.debugger.PC);return this.memory[e]},getAll:function(){return this.memory},reset:function(){this.memory.fill(0)},size:function(){return this.memory.length}},t.exports=n},{"./ttk91js.exceptions.js":9}]},{},[10]);